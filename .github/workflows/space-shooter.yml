name: Update Space Shooter GIF
on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:
permissions:
  contents: write
jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Configure git user
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
      - name: Checkout branch (avoid detached HEAD)
        run: git checkout ${{ github.ref_name }}
      - name: Pull latest changes
        run: git pull origin ${{ github.ref_name }} --rebase
      - name: Create assets directory
        run: mkdir -p assets
      - uses: czl9707/gh-space-shooter@v1
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          output-path: assets/space-shooter.gif
          strategy: random
